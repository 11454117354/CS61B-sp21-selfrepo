# Gitlet Design Document

**Name**:Chen

## Classes and Data Structures


### Main
程序的入口 
- 读取命令行参数，根据第一个参数来判断调用哪个命令
- 调用Repository中对应的方法来执行业务逻辑
#### Fields


### Repository
管理仓库的状态
- 处理Gitlet命令
- 管理HEAD、分支表、暂存区
- 负责在对象存储中保存与读取Commit和Blob对象
#### Fields


### Commits
每次的commit存储的地方  
Instance variables:  
- message (String)
- timestamp (Automatically generated by the constructor)
- id (String SHA-1 hash, automatically generated by the constructor)
- parent (String SHA-1 hash)
- trackedFiles (Map<String, String>)(Map<Filename, blobId>)

### Blob
文件内容的快照  
含有：
- 文件名
- 文件内容

### StagingArea
暂存区：
- added
- remove

## Algorithms
### init
### add
### commit
### checkout

## Persistence
通过将对象写入存储中实现：
````
.gitlet/
├── HEAD(存储HEAD指针的位置)
├── objects/
│   ├── commits/
│   └── blobs/(存储每个add进的文件，名字是hash)
├── refs/
│   └── heads/(内含master文件，内容是master指向的commit的hash; 与其他的branch文件，文件名是branch名，内容是hash)
├── staging/
│   ├── add/(存放刚add的文件，文件名为原文件名，blobId(hash)作为文件内容)
│   └── remove/
````
Objects使用Java serialization写入存储。
